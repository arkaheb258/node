/*! Data kompilacji: Tue Jul 28 2015 11:01:42 */
define(["jquery","zmienneGlobalne"],function(a,b){"use strict";var c=!1,d=function(b){var c;c=b,require(["wspolne/brakPolTCP"],function(b){b.inicjacja("Błąd pobrania pliku json",c,!0),a("#DialogBrakKomunikacjiTCP").addClass("bladFtp")}),setTimeout(function(){require(["alert"],function(a){a.inicjacja({texts:["Restart..."],timer:5e3,restart:!0,position:"bottom"})})},5e3)},e=function(b){var e;return a.ajax({dataType:"json",async:!1,url:b,error:function(a){c=!0,d(a.responseText),console.log("Blad pobrania danych z pliku JSON, xhr:"+a.responseText)},success:function(a){"string"==typeof a?(c=!0,d(a)):e=a}}),e},f=function(c){var d=!1;a.ajax({dataType:"jsonp",timeout:15e3,data:c,url:b.adresSerweraRozkazy,error:function(a,b){require(["progresBar"],function(c){c.inicjacja({status:"OK",error:"xhr_status:"+a.status+", status:"+b})})},complete:function(a,b){"success"!==b&&"error"!==b&&require(["progresBar"],function(a){a.inicjacja({status:"error",error:"status:"+b})})},success:function(b){"OK"===b?console.log(b):"[object Array]"===Object.prototype.toString.call(b)?require(["komunikaty/historia"],function(a){a.inicjacja(b)}):"PAR_OK"===b?console.log("PAR_OK"):"BLOK_OK"===b?setTimeout(function(){a("#PelnaListaKomm").length>0&&require(["komunikatyPelnaLista/main"],function(a){a.odswiez()})},2e3):"EKS_OK"===b?require(["ksiazkaSerwisowa/potwierdzenie"],function(a){a.odswiezWygladButtona()}):(console.log("odpowiedz - blad:"+b),d=!0),require(["progresBar"],function(a){a.inicjacja(d?{status:"error",error:b}:{status:"OK"})})}})},g=function(c,d){var e=[],f=[];return f=void 0===d?JSON.parse(JSON.stringify(b.sygnaly)):d,a.each(f,function(){var b=this;a.each(b,function(a,d){("grupa"===a||"grupa_2"===a||"plc_nr"===a||"id"===a)&&d===c&&e.push(b)})}),e},h=function(b,c){var d=[];return a.each(c,function(){var c=this;a.each(c,function(a,e){"wykresy"===a&&e===b&&void 0!==c.id&&d.push(c)})}),d},i=function(d){var f=new a.Deferred;switch(d){case"parametry.json":b.parametry=e("json/"+d);break;case"sygnaly.json":b.sygnaly=e("json/"+d);break;case"konfiguracja.json":b.danePlikuKonfiguracyjnego=e("json/"+d);break;case"konfiguracjaMinViz.json":b.danePlikuKonfiguracyjnego=e("json/ktw/"+d);break;case"hardware.json":b.hardware=e("json/"+d);break;case"komunikaty.json":b.tekstyKomunikatow=e("json/"+d);break;case"diagnostykaBlokow.json":b.diagnostykaBlokow=e("json/"+d)}return f.resolve(c?!1:!0),f};return{pobierz:e,wyslij:f,szukajWartosci:g,szukajWykresow:h,pobierzAsynchronicznie:i}});