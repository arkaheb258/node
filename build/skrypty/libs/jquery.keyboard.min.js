/*! Data kompilacji: Fri Oct 03 2014 10:52:28 */
!function(a){a.keyboard=function(b,c){var d,e=this;e.$el=a(b),e.el=b,e.$el.data("keyboard",e),e.init=function(){e.options=d=a.extend(!0,{},a.keyboard.defaultOptions,c),e.shiftActive=e.altActive=e.metaActive=e.sets=e.capsLock=!1,e.lastKeyset=[!1,!1,!1],e.rows=["","-shift","-alt","-alt-shift"],e.acceptedKeys=[],e.mappedKeys={},a('<!--[if lte IE 8]><script>jQuery("body").addClass("oldie");</script><![endif]--><!--[if IE]><script>jQuery("body").addClass("ie");</script><![endif]-->').appendTo("body").remove(),e.msie=a("body").hasClass("oldie"),e.allie=a("body").hasClass("ie"),e.inPlaceholder=e.$el.attr("placeholder")||"",e.watermark="undefined"!=typeof document.createElement("input").placeholder&&""!==e.inPlaceholder,e.regex=a.keyboard.comboRegex,e.decimal=/^\./.test(d.display.dec)?!0:!1,e.repeatTime=1e3/(d.repeatRate||20),d.preventDoubleEventTime=d.preventDoubleEventTime||100,e.isOpen=!1,e.temp=a('<input style="position:absolute;left:-9999em;top:-9999em;" type="text" value="testing">').appendTo("body").caret(3,3),e.checkCaret=d.lockInput||3!==e.temp.hide().show().caret().start?!0:!1,e.temp.remove(),e.lastCaret={start:0,end:0},e.temp=["",0,0],a.each("initialized beforeVisible visible hidden canceled accepted beforeClose".split(" "),function(b,c){a.isFunction(d[c])&&e.$el.bind(c+".keyboard",d[c])}),d.alwaysOpen&&(d.stayOpen=!0),a(document).bind(["mousedown","keyup","touchstart","checkkeyboard"].join(".keyboard "),function(b){e.opening||(e.escClose(b),b.target&&a(b.target).hasClass("ui-keyboard-input")&&(b=a(b.target).data("keyboard"))&&b.options.openOn&&b.focusOn())}),e.$el.addClass("ui-keyboard-input "+d.css.input).attr({"aria-haspopup":"true",role:"textbox"}),(e.$el.is(":disabled")||e.$el.attr("readonly")&&!e.$el.hasClass("ui-keyboard-lockedinput"))&&e.$el.addClass("ui-keyboard-nokeyboard"),d.openOn&&e.$el.bind(d.openOn+".keyboard",function(){e.focusOn()}),e.watermark||""!==e.$el.val()||""===e.inPlaceholder||""===e.$el.attr("placeholder")||e.$el.addClass("ui-keyboard-placeholder").val(e.inPlaceholder),e.$el.trigger("initialized.keyboard",[e,e.el]),d.alwaysOpen&&e.reveal()},e.setCurrent=function(){a(".ui-keyboard-has-focus").removeClass("ui-keyboard-has-focus"),a(".ui-keyboard-input-current").removeClass("ui-keyboard-input-current"),e.$el.addClass("ui-keyboard-input-current"),e.$keyboard.addClass("ui-keyboard-has-focus"),e.isCurrent(!0),e.isOpen=!0},e.isCurrent=function(b){var c=a.keyboard.currentKeyboard||!1;return b?c=a.keyboard.currentKeyboard=e.el:!1===b&&c===e.el&&(c=a.keyboard.currentKeyboard=""),c===e.el},e.isVisible=function(){return"undefined"==typeof e.$keyboard?!1:e.$keyboard.is(":visible")},e.focusOn=function(){d.usePreview&&e.$el.is(":visible")&&(e.lastCaret=e.$el.caret()),e.isVisible()||(clearTimeout(e.timer),e.reveal()),d.alwaysOpen&&e.setCurrent()},e.reveal=function(){if(e.opening=!0,a(".ui-keyboard").not(".ui-keyboard-always-open").hide(),!(e.$el.is(":disabled")||e.$el.attr("readonly")&&!e.$el.hasClass("ui-keyboard-lockedinput"))){e.$el.removeClass("ui-keyboard-nokeyboard"),d.openOn&&e.$el.unbind(d.openOn+".keyboard"),"undefined"==typeof e.$keyboard&&e.startup(),e.watermark||e.el.value!==e.inPlaceholder||e.$el.removeClass("ui-keyboard-placeholder").val(""),e.originalContent=e.$el.val(),e.$preview.val(e.originalContent),d.acceptValid&&e.checkValid();var b;return e.position=d.position,e.position.of=e.position.of||e.$el.data("keyboardPosition")||e.$el,e.position.collision=e.position.collision||(d.usePreview?"fit fit":"flip flip"),d.resetDefault&&(e.shiftActive=e.altActive=e.metaActive=!1,e.showKeySet()),e.$keyboard.css({position:"absolute",left:0,top:0}),e.$el.trigger("beforeVisible.keyboard",[e,e.el]),e.setCurrent(),e.$keyboard.show(),d.usePreview&&e.msie&&("undefined"==typeof e.width&&(e.$preview.hide(),e.width=Math.ceil(e.$keyboard.width()),e.$preview.show()),e.$preview.width(e.width)),a.ui.position&&e.$keyboard.position(e.position),d.initialFocus&&e.$preview.focus(),e.checkDecimal(),e.lineHeight=parseInt(e.$preview.css("lineHeight"),10)||parseInt(e.$preview.css("font-size"),10)+4,d.caretToEnd&&(b=e.originalContent.length,e.lastCaret={start:b,end:b}),e.allie&&(b=e.lastCaret.start||e.originalContent.length,b={start:b,end:b},e.lastCaret||(e.lastCaret=b),0===e.lastCaret.end&&0<e.lastCaret.start&&(e.lastCaret.end=e.lastCaret.start),0>e.lastCaret.start&&(e.lastCaret=b)),setTimeout(function(){e.opening=!1,d.initialFocus&&e.$preview.caret(e.lastCaret.start,e.lastCaret.end),e.$el.trigger("visible.keyboard",[e,e.el])},10),e}e.$el.addClass("ui-keyboard-nokeyboard")},e.startup=function(){a.isFunction(d.create)&&(e.$keyboard=d.create(e)),"undefined"==typeof e.$keyboard&&(e.$keyboard=e.buildKeyboard()),e.preview=e.$preview[0],e.$decBtn=e.$keyboard.find(".ui-keyboard-dec"),e.wheel=a.isFunction(a.fn.mousewheel),e.alwaysAllowed=[20,33,34,35,36,37,38,39,40,45,46],(d.enterNavigation||"TEXTAREA"===e.el.tagName)&&e.alwaysAllowed.push(13),e.bindKeyboard(),d.appendLocally?e.$el.after(e.$keyboard):e.$keyboard.appendTo("body"),e.bindKeys(),a(window).bind("resize.keyboard",function(){e.isVisible()&&e.$keyboard.position(e.position)})},e.bindKeyboard=function(){e.$preview.unbind("keypress keyup keydown mouseup touchend ".split(" ").join(".keyboard ")).bind("keypress.keyboard",function(b){var c=e.lastKey=String.fromCharCode(b.charCode||b.which);if(e.$lastKey=[],e.checkCaret&&(e.lastCaret=e.$preview.caret()),e.capsLock=c>=65&&90>=c&&!b.shiftKey||c>=97&&122>=c&&b.shiftKey?!0:!1,d.restrictInput){if((8===b.which||0===b.which)&&a.inArray(b.keyCode,e.alwaysAllowed))return;-1===a.inArray(c,e.acceptedKeys)&&b.preventDefault()}else if((b.ctrlKey||b.metaKey)&&(97===b.which||99===b.which||118===b.which||120<=b.which&&122>=b.which))return;e.hasMappedKeys&&e.mappedKeys.hasOwnProperty(c)&&(e.lastKey=e.mappedKeys[c],e.insertText(e.lastKey),b.preventDefault()),e.checkMaxLength()}).bind("keyup.keyboard",function(b){switch(b.which){case 9:if(e.tab&&d.tabNavigation&&!d.lockInput){if(e.shiftActive=b.shiftKey,b=a.keyboard.keyaction.tab(e),e.tab=!1,!b)return!1}else b.preventDefault();break;case 27:return e.close(),!1}clearTimeout(e.throttled),e.throttled=setTimeout(function(){e.isVisible()&&e.checkCombos()},100),e.checkMaxLength(),a.isFunction(d.change)&&d.change(a.Event("change"),e,e.el),e.$el.trigger("change.keyboard",[e,e.el])}).bind("keydown.keyboard",function(b){switch(b.which){case 9:return e.tab=!0,!1;case 13:a.keyboard.keyaction.enter(e,null,b);break;case 20:e.shiftActive=e.capsLock=!e.capsLock,e.showKeySet(this);break;case 86:if(b.ctrlKey||b.metaKey){if(d.preventPaste){b.preventDefault();break}e.checkCombos()}}}).bind("mouseup.keyboard touchend.keyboard",function(){e.checkCaret&&(e.lastCaret=e.$preview.caret())}),e.$keyboard.bind("mousedown.keyboard click.keyboard touchstart.keyboard",function(b){b.stopPropagation(),e.isCurrent()||(e.reveal(),a(document).trigger("checkkeyboard.keyboard"))}),d.preventPaste&&(e.$preview.bind("contextmenu.keyboard",function(a){a.preventDefault()}),e.$el.bind("contextmenu.keyboard",function(a){a.preventDefault()}))},e.bindKeys=function(){var b=(d.keyBinding+" repeater mouseenter mouseleave touchstart mousewheel mouseup click ").split(" ").join(".keyboard ")+"mouseleave.kb mousedown.kb touchstart.kb touchend.kb touchmove.kb touchcancel.kb ";e.$allKeys=e.$keyboard.find("button.ui-keyboard-button").unbind(b).bind(d.keyBinding.split(" ").join(".keyboard ")+".keyboard repeater.keyboard",function(b){if(!e.$keyboard.is(":visible"))return!1;var c;c=a.data(this,"key");var f=c.action.split(":")[0],g=(new Date).getTime();if(!(g-(e.lastEventTime||0)<d.preventDoubleEventTime)){if(e.lastEventTime=g,e.$preview.focus(),e.$lastKey=a(this),e.lastKey=c.curTxt,e.checkCaret&&e.$preview.caret(e.lastCaret.start,e.lastCaret.end),f.match("meta")&&(f="meta"),a.keyboard.keyaction.hasOwnProperty(f)&&a(this).hasClass("ui-keyboard-actionkey")){if(!1===a.keyboard.keyaction[f](e,this,b))return!1}else"undefined"!=typeof c.action&&(c=e.lastKey=e.wheel&&!a(this).hasClass("ui-keyboard-actionkey")?c.curTxt:c.action,e.insertText(c),e.capsLock||d.stickyShift||b.shiftKey||(e.shiftActive=!1,e.showKeySet(this)));e.$preview.focus().caret(e.lastCaret.start,e.lastCaret.end),e.checkCombos(),e.checkMaxLength(),a.isFunction(d.change)&&d.change(a.Event("change"),e,e.el),e.$el.trigger("change.keyboard",[e,e.el]),b.preventDefault()}}).bind("mouseenter.keyboard mouseleave.keyboard touchstart.keyboard",function(b){if(e.isCurrent()){var c=a(this),f=a.data(this,"key"),g=f.layers||e.getLayers(c);f.layers=g=a.grep(g,function(b,c){return a.inArray(b,g)===c}),"mouseenter"!==b.type&&"touchstart"!==b.type||"password"===e.el.type||c.hasClass(d.css.buttonDisabled)||c.addClass(d.css.buttonHover).attr("title",function(a,c){return e.wheel&&""===c&&e.sets&&1<g.length&&"touchstart"!==b.type?d.wheelMessage:c}),"mouseleave"===b.type&&(f.curTxt=f.original,f.curNum=0,a.data(this,"key",f),c.removeClass("password"===e.el.type?"":d.css.buttonHover).attr("title",function(a,b){return b===d.wheelMessage?"":b}).find("span").text(f.original))}}).bind("mousewheel.keyboard",function(b,c){if(e.wheel){var d,f=a(this),g=a.data(this,"key");return d=g.layers||e.getLayers(f),1<d.length?(g.curNum+=c>0?-1:1,g.curNum>d.length-1&&(g.curNum=0),0>g.curNum&&(g.curNum=d.length-1)):g.curNum=0,g.layers=d,g.curTxt=d[g.curNum],a.data(this,"key",g),f.find("span").text(d[g.curNum]),!1}}).bind("mouseup.keyboard mouseleave.kb touchend.kb touchmove.kb touchcancel.kb",function(b){return/(mouseleave|touchend|touchcancel)/.test(b.type)?a(this).removeClass(d.css.buttonHover):(e.isVisible()&&e.isCurrent()&&e.$preview.focus(),e.checkCaret&&e.$preview.caret(e.lastCaret.start,e.lastCaret.end)),e.mouseRepeat=[!1,""],clearTimeout(e.repeater),!1}).bind("click.keyboard",function(){return!1}).not(".ui-keyboard-actionkey").add(".ui-keyboard-tab, .ui-keyboard-bksp, .ui-keyboard-space, .ui-keyboard-enter",e.$keyboard).bind("mousedown.kb touchstart.kb",function(){if(0!==d.repeatRate){var b=a(this);e.mouseRepeat=[!0,b],setTimeout(function(){e.mouseRepeat[0]&&e.mouseRepeat[1]===b&&e.repeatKey(b)},d.repeatDelay)}return!1})},e.insertText=function(a){var b,c;c=e.$preview.val();var d=e.$preview.caret(),f=e.$preview.scrollLeft();b=e.$preview.scrollTop();var g=c.length;d.end<d.start&&(d.end=d.start),d.start>g&&(d.end=d.start=g),"TEXTAREA"===e.preview.tagName&&(e.msie&&"\n"===c.substr(d.start,1)&&(d.start+=1,d.end+=1),c=c.split("\n").length-1,e.preview.scrollTop=c>0?e.lineHeight*c:b),b="bksp"===a&&d.start===d.end?!0:!1,a="bksp"===a?"":a,c=d.start+(b?-1:a.length),f+=parseInt(e.$preview.css("fontSize"),10)*("bksp"===a?-1:1),e.$preview.val(e.$preview.val().substr(0,d.start-(b?1:0))+a+e.$preview.val().substr(d.end)).caret(c,c).scrollLeft(f),e.lastCaret={start:c,end:c}},e.checkMaxLength=function(){var a,b=e.$preview.val();!1!==d.maxLength&&b.length>d.maxLength&&(a=Math.min(e.$preview.caret().start,d.maxLength),e.$preview.val(b.substring(0,d.maxLength)),e.$preview.caret(a,a),e.lastCaret={start:a,end:a}),e.$decBtn.length&&e.checkDecimal()},e.repeatKey=function(a){a.trigger("repeater.keyboard"),e.mouseRepeat[0]&&(e.repeater=setTimeout(function(){e.repeatKey(a)},e.repeatTime))},e.showKeySet=function(a){var b="",c=(e.shiftActive?1:0)+(e.altActive?2:0);e.shiftActive||(e.capsLock=!1),e.metaActive?(b=a&&a.name&&/meta/.test(a.name)?a.name:"",""===b?b=!0===e.metaActive?"":e.metaActive:e.metaActive=b,(!d.stickyShift&&e.lastKeyset[2]!==e.metaActive||(e.shiftActive||e.altActive)&&!e.$keyboard.find(".ui-keyboard-keyset-"+b+e.rows[c]).length)&&(e.shiftActive=e.altActive=!1)):!d.stickyShift&&e.lastKeyset[2]!==e.metaActive&&e.shiftActive&&(e.shiftActive=e.altActive=!1),c=(e.shiftActive?1:0)+(e.altActive?2:0),b=0!==c||e.metaActive?""===b?"":"-"+b:"-default",e.$keyboard.find(".ui-keyboard-keyset"+b+e.rows[c]).length?(e.$keyboard.find(".ui-keyboard-alt, .ui-keyboard-shift, .ui-keyboard-actionkey[class*=meta]").removeClass(d.css.buttonAction).end().find(".ui-keyboard-alt")[e.altActive?"addClass":"removeClass"](d.css.buttonAction).end().find(".ui-keyboard-shift")[e.shiftActive?"addClass":"removeClass"](d.css.buttonAction).end().find(".ui-keyboard-lock")[e.capsLock?"addClass":"removeClass"](d.css.buttonAction).end().find(".ui-keyboard-keyset").hide().end().find(".ui-keyboard-keyset"+b+e.rows[c]).show().end().find(".ui-keyboard-actionkey.ui-keyboard"+b).addClass(d.css.buttonAction),e.lastKeyset=[e.shiftActive,e.altActive,e.metaActive]):(e.shiftActive=e.lastKeyset[0],e.altActive=e.lastKeyset[1],e.metaActive=e.lastKeyset[2])},e.checkCombos=function(){if(!e.isVisible())return e.$preview.val();var a,b,c,f,g=e.$preview.val(),h=e.$preview.caret(),i=g.length;if(h.end<h.start&&(h.end=h.start),h.start>i&&(h.end=h.start=i),e.msie&&"\n"===g.substr(h.start,1)&&(h.start+=1,h.end+=1),d.useCombos&&(e.msie?g=g.replace(e.regex,function(a,b,c){return d.combos.hasOwnProperty(b)?d.combos[b][c]||a:a}):e.$preview.length&&(c=h.start-(0<=h.start-2?2:0),e.$preview.caret(c,h.end),f=(e.$preview.caret().text||"").replace(e.regex,function(a,b,c){return d.combos.hasOwnProperty(b)?d.combos[b][c]||a:a}),e.$preview.val(e.$preview.caret().replace(f)),g=e.$preview.val())),d.restrictInput&&""!==g){for(c=g,b=e.acceptedKeys.length,a=0;b>a;a++)""!==c&&(f=e.acceptedKeys[a],0<=g.indexOf(f)&&(/[\[|\]|\\|\^|\$|\.|\||\?|\*|\+|\(|\)|\{|\}]/g.test(f)&&(f="\\"+f),c=c.replace(RegExp(f,"g"),"")));""!==c&&(g=g.replace(c,""))}return h.start+=g.length-i,h.end+=g.length-i,e.$preview.val(g),e.$preview.caret(h.start,h.end),e.preview.scrollTop=e.lineHeight*(g.substring(0,h.start).split("\n").length-1),e.lastCaret={start:h.start,end:h.end},d.acceptValid&&e.checkValid(),g},e.checkValid=function(){var a=!0;d.validate&&"function"==typeof d.validate&&(a=d.validate(e,e.$preview.val(),!1)),e.$keyboard.find(".ui-keyboard-accept")[a?"removeClass":"addClass"]("ui-keyboard-invalid-input")[a?"addClass":"removeClass"]("ui-keyboard-valid-input")},e.checkDecimal=function(){e.decimal&&/\./g.test(e.preview.value)||!e.decimal&&/\,/g.test(e.preview.value)?e.$decBtn.attr({disabled:"disabled","aria-disabled":"true"}).removeClass(d.css.buttonDefault+" "+d.css.buttonHover).addClass(d.css.buttonDisabled):e.$decBtn.removeAttr("disabled").attr({"aria-disabled":"false"}).addClass(d.css.buttonDefault).removeClass(d.css.buttonDisabled)},e.getLayers=function(b){var c;return c=b.attr("data-pos"),b.closest(".ui-keyboard").find('button[data-pos="'+c+'"]').map(function(){return a(this).find("> span").text()}).get()},e.switchInput=function(b,c){if("function"==typeof d.switchInput)d.switchInput(e,b,c);else{e.$keyboard.hide();var f;f=!1;var g=a("button, input, textarea, a").filter(":visible"),h=g.index(e.$el)+(b?1:-1);e.$keyboard.show(),h>g.length-1&&(f=d.stopAtEnd,h=0),0>h&&(f=d.stopAtEnd,h=g.length-1),f||(e.close(c),(f=g.eq(h).data("keyboard"))&&f.options.openOn.length?f.focusOn():g.eq(h).focus())}return!1},e.close=function(b){if(e.isOpen){clearTimeout(e.throttled);var c=b?e.checkCombos():e.originalContent;if(b&&d.validate&&"function"==typeof d.validate&&!d.validate(e,c,!0)&&(c=e.originalContent,b=!1,d.cancelClose))return;e.isCurrent(!1),e.isOpen=!1,e.$el.removeClass("ui-keyboard-input-current ui-keyboard-autoaccepted").addClass(b?!0===b?"":"ui-keyboard-autoaccepted":"").trigger(d.alwaysOpen?"":"beforeClose.keyboard",[e,e.el,b||!1]).val(c).scrollTop(e.el.scrollHeight).trigger(b?"accepted.keyboard":"canceled.keyboard",[e,e.el]).trigger(d.alwaysOpen?"inactive.keyboard":"hidden.keyboard",[e,e.el]).blur(),e.$preview.val(c),d.openOn&&(e.timer=setTimeout(function(){e.$el.bind(d.openOn+".keyboard",function(){e.focusOn()}),a(":focus")[0]===e.el&&e.$el.blur()},500)),d.alwaysOpen||e.$keyboard.hide(),e.watermark||""!==e.el.value||""===e.inPlaceholder||e.$el.addClass("ui-keyboard-placeholder").val(e.inPlaceholder),e.$el.trigger("change")}return!!b},e.accept=function(){return e.close(!0)},e.escClose=function(a){return a&&"keyup"===a.type?27===a.which?e.close():"":void(e.isOpen&&(!e.isCurrent()&&e.isOpen||e.isOpen&&a.target!==e.el&&!d.stayOpen)&&(e.allie&&a.preventDefault(),e.close(d.autoAccept?"true":!1)))},e.keyBtn=a("<button />").attr({role:"button","aria-disabled":"false",tabindex:"-1"}).addClass("ui-keyboard-button"),e.addKey=function(b,c,f){var g,h,i;c=!0===f?b:d.display[c]||b;var j=!0===f?b.charCodeAt(0):b;return/\(.+\)/.test(c)&&(h=c.replace(/\(([^()]+)\)/,""),g=c.match(/\(([^()]+)\)/)[1],c=h,i=h.split(":"),h=""!==i[0]&&1<i.length?i[0]:h,e.mappedKeys[g]=h),i=c.split(":"),""===i[0]&&""===i[1]&&(c=":"),c=""!==i[0]&&1<i.length?a.trim(i[0]):c,g=1<i.length?a.trim(i[1]).replace(/_/g," ")||"":"",h=1<c.length?" ui-keyboard-widekey":"",h+=f?"":" ui-keyboard-actionkey",e.keyBtn.clone().attr({"data-value":c,name:j,"data-pos":e.temp[1]+","+e.temp[2],title:g}).data("key",{action:b,original:c,curTxt:c,curNum:0}).addClass("ui-keyboard-"+j+h+" "+d.css.buttonDefault).html("<span>"+c+"</span>").appendTo(e.temp[0])},e.buildKeyboard=function(){var b,c,f,g,h,i,j,k,l,m=0,n=a("<div />").addClass("ui-keyboard "+d.css.container+(d.alwaysOpen?" ui-keyboard-always-open":"")).attr({role:"textbox"}).hide();return d.usePreview?(e.$preview=e.$el.clone(!1).removeAttr("id").removeClass("ui-keyboard-placeholder ui-keyboard-input").addClass("ui-keyboard-preview "+d.css.input).attr("tabindex","-1").show(),a("<div />").addClass("ui-keyboard-preview-wrapper").append(e.$preview).appendTo(n)):(e.$preview=e.$el,d.position.at=d.position.at2),d.lockInput&&e.$preview.addClass("ui-keyboard-lockedinput").attr({readonly:"readonly"}),"custom"!==d.layout&&a.keyboard.layouts.hasOwnProperty(d.layout)||(d.layout="custom",a.keyboard.layouts.custom=d.customLayout||{"default":["{cancel}"]}),a.each(a.keyboard.layouts[d.layout],function(o,p){if(""!==o)for(m++,g=a("<div />").attr("name",o).addClass("ui-keyboard-keyset ui-keyboard-keyset-"+o).appendTo(n)["default"===o?"show":"hide"](),f=0;f<p.length;f++){for(i=a.trim(p[f]).replace(/\{(\.?)[\s+]?:[\s+]?(\.?)\}/g,"{$1:$2}"),k=i.split(/\s+/),j=0;j<k.length;j++)if(e.temp=[g,f,j],h=!1,0!==k[j].length)if(/^\{\S+\}$/.test(k[j]))if(c=k[j].match(/^\{(\S+)\}$/)[1].toLowerCase(),/\!\!/.test(c)&&(c=c.replace("!!",""),h=!0),/^sp:((\d+)?([\.|,]\d+)?)(em|px)?$/.test(c)&&(l=parseFloat(c.replace(/,/,".").match(/^sp:((\d+)?([\.|,]\d+)?)(em|px)?$/)[1]||0),a("<span>&nbsp;</span>").width(c.match("px")?l+"px":2*l+"em").addClass("ui-keyboard-button ui-keyboard-spacer").appendTo(g)),/^meta\d+\:?(\w+)?/.test(c))e.addKey(c,c);else switch(c){case"a":case"accept":e.addKey("accept",c).addClass(d.css.buttonAction);break;case"alt":case"altgr":e.addKey("alt","alt");break;case"b":case"bksp":e.addKey("bksp",c);break;case"c":case"cancel":e.addKey("cancel",c).addClass(d.css.buttonAction);break;case"combo":e.addKey("combo","combo").addClass(d.css.buttonAction);break;case"dec":e.acceptedKeys.push(e.decimal?".":","),e.addKey("dec","dec");break;case"e":case"enter":e.addKey("enter",c).addClass(d.css.buttonAction);break;case"empty":e.addKey(""," ").addClass(d.css.buttonDisabled).attr("aria-disabled",!0);break;case"s":case"shift":e.addKey("shift",c);break;case"sign":e.acceptedKeys.push("-"),e.addKey("sign","sign");break;case"space":e.acceptedKeys.push(" "),e.addKey("space","space");break;case"t":case"tab":e.addKey("tab",c);break;default:a.keyboard.keyaction.hasOwnProperty(c)&&e.addKey(c,c)[h?"addClass":"removeClass"](d.css.buttonAction)}else b=k[j],e.acceptedKeys.push(":"===b?b:b.split(":")[0]),e.addKey(b,b,!0);g.find(".ui-keyboard-button:last").after('<br class="ui-keyboard-button-endrow">')}}),m>1&&(e.sets=!0),e.hasMappedKeys=!a.isEmptyObject(e.mappedKeys),n},e.destroy=function(){a(document).unbind("mousedown.keyboard keyup.keyboard touchstart.keyboard"),e.$keyboard&&e.$keyboard.remove();var b=a.trim(d.openOn+" accepted beforeClose canceled change contextmenu hidden initialized keydown keypress keyup visible").split(" ").join(".keyboard ");e.$el.removeClass("ui-keyboard-input ui-keyboard-lockedinput ui-keyboard-placeholder ui-keyboard-notallowed ui-keyboard-always-open "+d.css.input).removeAttr("aria-haspopup").removeAttr("role").unbind(b+".keyboard").removeData("keyboard")},e.init()},a.keyboard.keyaction={accept:function(a){return a.close(!0),!1},alt:function(a,b){a.altActive=!a.altActive,a.showKeySet(b)},bksp:function(a){a.insertText("bksp")},cancel:function(a){return a.close(),!1},clear:function(a){a.$preview.val("")},combo:function(a){var b=!a.options.useCombos;return a.options.useCombos=b,a.$keyboard.find(".ui-keyboard-combo").toggleClass(a.options.css.buttonAction,b),b&&a.checkCombos(),!1},dec:function(a){a.insertText(a.decimal?".":",")},"default":function(a,b){a.shiftActive=a.altActive=a.metaActive=!1,a.showKeySet(b)},enter:function(b,c,d){c=b.el.tagName;var e=b.options;return d.shiftKey?e.enterNavigation?b.switchInput(!d[e.enterMod],!0):b.close(!0):e.enterNavigation&&("TEXTAREA"!==c||d[e.enterMod])?b.switchInput(!d[e.enterMod],e.autoAccept?"true":!1):void("TEXTAREA"===c&&a(d.target).closest("button").length&&b.insertText(" \n"))},lock:function(a,b){a.lastKeyset[0]=a.shiftActive=a.capsLock=!a.capsLock,a.showKeySet(b)},left:function(a){var b=a.$preview.caret();0<=b.start-1&&(a.lastCaret={start:b.start-1,end:b.start-1})},meta:function(b,c){b.metaActive=a(c).hasClass(b.options.css.buttonAction)?!1:!0,b.showKeySet(c)},next:function(a){return a.switchInput(!0,a.options.autoAccept),!1},prev:function(a){return a.switchInput(!1,a.options.autoAccept),!1},right:function(a){var b=a.$preview.caret();b.start+1<=a.$preview.val().length&&(a.lastCaret={start:b.start+1,end:b.start+1})},shift:function(a,b){a.lastKeyset[0]=a.shiftActive=!a.shiftActive,a.showKeySet(b)},sign:function(a){/^\-?\d*\.?\d*$/.test(a.$preview.val())&&a.$preview.val(-1*a.$preview.val())},space:function(a){a.insertText(" ")},tab:function(a){var b=a.options;return"INPUT"===a.el.tagName?b.tabNavigation?a.switchInput(!a.shiftActive,!0):!1:void a.insertText("	")}},a.keyboard.layouts={alpha:{"default":["` 1 2 3 4 5 6 7 8 9 0 - = {bksp}","{tab} a b c d e f g h i j [ ] \\","k l m n o p q r s ; ' {enter}","{shift} t u v w x y z , . / {shift}","{accept} {space} {cancel}"],shift:["~ ! @ # $ % ^ & * ( ) _ + {bksp}","{tab} A B C D E F G H I J { } |",'K L M N O P Q R S : " {enter}',"{shift} T U V W X Y Z < > ? {shift}","{accept} {space} {cancel}"]},qwerty:{"default":["` 1 2 3 4 5 6 7 8 9 0 - = {bksp}","{tab} q w e r t y u i o p [ ] \\","a s d f g h j k l ; ' {enter}","{shift} z x c v b n m , . / {shift}","{accept} {space} {cancel}"],shift:["~ ! @ # $ % ^ & * ( ) _ + {bksp}","{tab} Q W E R T Y U I O P { } |",'A S D F G H J K L : " {enter}',"{shift} Z X C V B N M < > ? {shift}","{accept} {space} {cancel}"]},international:{"default":["` 1 2 3 4 5 6 7 8 9 0 - = {bksp}","{tab} q w e r t y u i o p [ ] \\","a s d f g h j k l ; ' {enter}","{shift} z x c v b n m , . / {shift}","{accept} {alt} {space} {alt} {cancel}"],shift:["~ ! @ # $ % ^ & * ( ) _ + {bksp}","{tab} Q W E R T Y U I O P { } |",'A S D F G H J K L : " {enter}',"{shift} Z X C V B N M < > ? {shift}","{accept} {alt} {space} {alt} {cancel}"],alt:["~ ¡ ² ³ ¤ € ¼ ½ ¾ ‘ ’ ¥ × {bksp}","{tab} ä å é ® þ ü ú í ó ö « » ¬","á ß ð f g h j k ø ¶ ´ {enter}","{shift} æ x © v b ñ µ ç > ¿ {shift}","{accept} {alt} {space} {alt} {cancel}"],"alt-shift":["~ ¹ ² ³ £ € ¼ ½ ¾ ‘ ’ ¥ ÷ {bksp}","{tab} Ä Å É ® Þ Ü Ú Í Ó Ö « » ¦","Ä § Ð F G H J K Ø ° ¨ {enter}","{shift} Æ X ¢ V B Ñ µ Ç . ¿ {shift}","{accept} {alt} {space} {alt} {cancel}"]},dvorak:{"default":["` 1 2 3 4 5 6 7 8 9 0 [ ] {bksp}","{tab} ' , . p y f g c r l / = \\","a o e u i d h t n s - {enter}","{shift} ; q j k x b m w v z {shift}","{accept} {space} {cancel}"],shift:["~ ! @ # $ % ^ & * ( ) { } {bksp}",'{tab} " < > P Y F G C R L ? + |',"A O E U I D H T N S _ {enter}","{shift} : Q J K X B M W V Z {shift}","{accept} {space} {cancel}"]},num:{"default":"= ( ) {b};{clear} / * -;7 8 9 +;4 5 6 {sign};1 2 3 %;0 . {a} {c}".split(";")}},a.keyboard.defaultOptions={layout:"qwerty",customLayout:null,position:{of:null,my:"center top",at:"center top",at2:"center bottom"},usePreview:!0,alwaysOpen:!1,initialFocus:!0,stayOpen:!1,display:{a:"✔:Accept (Shift-Enter)",accept:"Accept:Accept (Shift-Enter)",alt:"Alt:⌥ AltGr",b:"⌫:Backspace",bksp:"Bksp:Backspace",c:"✖:Cancel (Esc)",cancel:"Cancel:Cancel (Esc)",clear:"C:Clear",combo:"ö:Toggle Combo Keys",dec:".:Decimal",e:"⏎:Enter",empty:" ",enter:"Enter:Enter ⏎",left:"←",lock:"Lock:⇪ Caps Lock",next:"Next ⇨",prev:"⇦ Prev",right:"→",s:"⇧:Shift",shift:"Shift:Shift",sign:"±:Change Sign",space:"&nbsp;:Space",t:"⇥:Tab",tab:"⇥ Tab:Tab"},wheelMessage:"Use mousewheel to see other keys",css:{input:"ui-widget-content ui-corner-all",container:"ui-widget-content ui-widget ui-corner-all ui-helper-clearfix",buttonDefault:"ui-state-default ui-corner-all",buttonHover:"ui-state-hover",buttonAction:"ui-state-active",buttonDisabled:"ui-state-disabled"},autoAccept:!1,lockInput:!1,restrictInput:!1,acceptValid:!1,cancelClose:!0,tabNavigation:!1,enterNavigation:!1,enterMod:"altKey",stopAtEnd:!0,appendLocally:!1,stickyShift:!0,preventPaste:!1,caretToEnd:!1,maxLength:!1,repeatDelay:500,repeatRate:20,resetDefault:!1,openOn:"focus",keyBinding:"mousedown touchstart",useCombos:!0,combos:{"`":{a:"à",A:"À",e:"è",E:"È",i:"ì",I:"Ì",o:"ò",O:"Ò",u:"ù",U:"Ù",y:"ỳ",Y:"Ỳ"},"'":{a:"á",A:"Á",e:"é",E:"É",i:"í",I:"Í",o:"ó",O:"Ó",u:"ú",U:"Ú",y:"ý",Y:"Ý"},'"':{a:"ä",A:"Ä",e:"ë",E:"Ë",i:"ï",I:"Ï",o:"ö",O:"Ö",u:"ü",U:"Ü",y:"ÿ",Y:"Ÿ"},"^":{a:"â",A:"Â",e:"ê",E:"Ê",i:"î",I:"Î",o:"ô",O:"Ô",u:"û",U:"Û",y:"ŷ",Y:"Ŷ"},"~":{a:"ã",A:"Ã",e:"ẽ",E:"Ẽ",i:"ĩ",I:"Ĩ",o:"õ",O:"Õ",u:"ũ",U:"Ũ",y:"ỹ",Y:"Ỹ",n:"ñ",N:"Ñ"}},validate:function(){return!0}},a.keyboard.comboRegex=/([`\'~\^\"ao])([a-z])/gim,a.keyboard.currentKeyboard="",a.fn.keyboard=function(b){return this.each(function(){a(this).data("keyboard")||new a.keyboard(this,b)})},a.fn.getkeyboard=function(){return this.data("keyboard")}}(jQuery),function(a,b,c,d){a.fn.caret=function(a,e){if("undefined"==typeof this[0]||this.is(":hidden")||"hidden"===this.css("visibility"))return this;var f,g,h,i,j;j=document.selection;var k=this[0],l=k.scrollTop,m="undefined"!=typeof k.selectionStart;return"number"==typeof a&&"number"==typeof e&&(g=a,i=e),"undefined"!=typeof g?(m?(k.selectionStart=g,k.selectionEnd=i):(j=k.createTextRange(),j.collapse(!0),j.moveStart("character",g),j.moveEnd("character",i-g),j.select()),(this.is(":visible")||"hidden"!==this.css("visibility"))&&this.focus(),k.scrollTop=l,this):(m?(f=k.selectionStart,h=k.selectionEnd):"TEXTAREA"===k.tagName?(i=this.val(),g=j[c](),j=g[d](),j.moveToElementText(k),j.setEndPoint("EndToEnd",g),f=j.text.replace(/\r/g,"\n")[b],h=f+g.text.replace(/\r/g,"\n")[b]):(i=this.val().replace(/\r/g,"\n"),g=j[c]()[d](),g.moveEnd("character",i[b]),f=""===g.text?i[b]:i.lastIndexOf(g.text),g=j[c]()[d](),g.moveStart("character",-i[b]),h=g.text[b]),j=(k.value||"").substring(f,h),{start:f,end:h,text:j,replace:function(a){return k.value.substring(0,f)+a+k.value.substring(h,k.value[b])}})}}(jQuery,"length","createRange","duplicate");