/*! Data kompilacji: Fri Oct 03 2014 10:52:28 */
define(["jquery","zmienneGlobalne","keyboard","keyboardNav","obslugaJSON"],function(a,b,c,d,e){"use strict";var f,g,h,i=function(){var b;b=a("#keyboard").keyboard().getkeyboard(),null!==b&&b.isVisible()&&(b.close(),b.destroy()),a("#DialogEdycjaParametru").empty(),a("#DialogEdycjaParametru").dialog("close"),a("#menu").addClass("kopex-selected")},j=function(){var c,d,j=!1,k=function(a){var b;return b=a%1===0?!0:!1};c=a("#keyboard").keyboard().getkeyboard(),"pLiczba"===h.TYP||"pCzas"===h.TYP?isNaN(g)?j=!1:(d=k(g)?h.PREC:g.toString().split(".")[1].length,j=d<=h.PREC?g<h.MIN||g>h.MAX?!1:!0:!1):j=!0,j?(b.doWyslania.parametr.id=f,b.doWyslania.parametr.wartosc=g,c.close(),c.destroy(),require(["progresBar"],function(a){a.inicjacja().done(function(a){a&&i()})}),e.wyslij(b.doWyslania.parametr),console.log(b.doWyslania.parametr)):setTimeout(function(){c.$el.val(b.danePlikuKonfiguracyjnego.TEKSTY.paramZlaWartosc),setTimeout(function(){c.$el.val("")},1500)},200)},k=function(a){b.doWyslania.parametr.id=f,b.doWyslania.parametr.wartosc=a,require(["progresBar"],function(a){a.inicjacja().done(function(a){a&&i()})}),e.wyslij(b.doWyslania.parametr),console.log(b.doWyslania.parametr)},l=function(){a("#keyboard").bind("canceled.keyboard",function(){i()}),a("#keyboard").bind("accepted.keyboard",function(a,b,c){"pString"===h.TYP?g=c.value:("pLiczba"===h.TYP||"pCzas"===h.TYP)&&(g=Number(c.value)),j()})},m=function(){var c,d,e;c=document.createElement("p"),a(c).css({position:"relative",top:"25%"}),d=document.createElement("label"),e=document.createElement("input"),a(d).attr("for","spinner"),a(c).append(d),a(e).attr("id","spinner").attr("name","value").css({"font-size":"1.5em","text-align":"center",width:"20em"}),a(c).append(e),a("#DialogEdycjaParametru").append(c),a("#DialogEdycjaParametru").dialog({buttons:[{disabled:!0,text:b.danePlikuKonfiguracyjnego.TEKSTY.zatwierdz},{disabled:!0,text:b.danePlikuKonfiguracyjnego.TEKSTY.anuluj}]}),a("#spinner").formatSpinner({values:h.LISTA,count:h.LISTA.length}),a("#spinner").addClass("kopex-selected").addClass("kopex-selected").formatSpinner("stepUp")},n=function(){var c,d,e;switch(e=b.danePlikuKonfiguracyjnego.TEKSTY.parametr+" "+h.ID,a("#DialogEdycjaParametru").empty(),a("#DialogEdycjaParametru").dialog("option","width","65%"),a("#DialogEdycjaParametru").dialog("option","height",a(document).height()/1.5),a("#DialogEdycjaParametru").dialog("option","title",e),a("#DialogEdycjaParametru").dialog("open"),c=document.createElement("p"),a(c).attr("id","pParametrOpis").text(h.OPIS).css({padding:"0.4em",border:"0.1em solid","border-color":"grey","font-style":"italic","font-size":"1.2em","text-align":"center","border-radius":"0.5em",width:"95%"}),a("#DialogEdycjaParametru").append(c),d="pLista"===h.TYP?" = "+h.LISTA[h.WART]:" = "+h.WART,c=document.createElement("p"),a(c).attr("id","pAktualnaWartosc").text(b.danePlikuKonfiguracyjnego.TEKSTY.paramAktWart+" "+d).css({"letter-spacing":"0.1em","text-align":"left","border-radius":"0.5em",width:"100%"}),a("#DialogEdycjaParametru").append(c),a("#menu").removeClass("kopex-selected"),b.doWyslania.parametr.typ=h.TYP,h.TYP){case"pLista":m();break;case"pString":case"pCzas":case"pLiczba":require(["wspolne/dodajKlawiature"],function(a){a.inicjacja(h,"DialogEdycjaParametru"),l()})}},o=function(){a("#menu").one("menuselect",function(c,d){var e,g=d.item.attr("id"),i=d.item.parent().parent(),j=i.parent().parent();return f=g,d.item.hasClass("ui-state-disabled")?void a("#menu").menu("next"):(b.zmienianyParametr.id=g,a.each(b.parametry.DANE,function(c,d){c===j.attr("id")&&(b.zmienianyParametr.grupa=c,a.each(d,function(c,d){c===i.attr("id")&&(b.zmienianyParametr.podgrupa=c,a.each(d,function(a,c){a===g&&(e=c,b.zmienianyParametr.obiekt=e)}))}))}),void(void 0!==e&&(h=e,n(e))))})};return{inicjacja:o,zamknijKlawiature:i,wyslijReaDolPLC:j,wyslijListeDoPLC:k}});