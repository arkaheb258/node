/*! Data kompilacji: Tue Jul 28 2015 11:01:42 */
define(["jquery","zmienneGlobalne","paper","obslugaJSON","ustawKolejnosc","wspolne/odswiezajObiekt"],function(a,b,c,d,e,f){"use strict";var g,h,i,j,k=!1,l="#idGrafikaTrybSerwisowy",m=[],n=[],o=[],p=[],q=[],r=[],s=[],t={fillColor:"grey",strokeColor:"silver",strokeWidth:2},u={fillColor:"green",strokeColor:"lime",strokeWidth:2},v={fillColor:"orange",strokeColor:"gold",strokeWidth:2},w=function(){var a=function(a,b){var c;if(c=f.typBitStan(a),c===!0)switch(a.jednostka){case"DI":b.style=u;break;case"DO":b.style=v;break;default:b.style=u}else b.style=t},b=function(b,c){var d,e;for(e=0;e<b.length;e+=1)"Analog"===b[e].typ_danych&&(d=void 0!==b[e].jednostka?b[e].jednostka:"",c[e].content=f.typAnalog(b[e])+" "+d),"Bit"===b[e].typ_danych&&a(b[e],c[e])};c.view.onFrame=function(c){var d,e;if(c.count%20===0&&(n.length>0&&b(m,n),p.length>0&&b(o,p),r.length>0&&b(q,r),s.length>0))for(d=0;d<s.length;d+=1)switch(e=s[d].id.toUpperCase()){case"LEWO":a(s[d],g);break;case"PRAWO":a(s[d],h);break;case"GORA":a(s[d],i);break;case"DOL":a(s[d],j)}}},x=function(){a(l).remove()},y=function(f,u){var v,x,y,z,A,B,C,D,E,F,G,H,I=5,J={fontFamily:"Arial",fontWeight:"normal",fontSize:"1em",fillColor:"silver",justification:"middle"},K=function(a){var b,c,d="",e="";for(b=0;b<a.length;b+=1)c=a.charAt(b),c===c.toUpperCase()&&isNaN(c)&&(d+=c)," "===c&&(d.length>2&&(e+=d+" "),d="");return e},L=function(a,b){var d,e=[],f=!1;for(H=0;H<a.length;H+=1)"Analog"===a[H].typ_danych&&(y=0===H?new c.Rectangle(new c.Point(b.bounds.bottomCenter),new c.Size(50,16)):new c.Rectangle(new c.Point(z.bounds.bottomCenter),new c.Size(50,16)),z=new c.Path.RoundRectangle(y,new c.Size(5,5)),z.fillColor="silver",0===H?z.position.x=b.bounds.rightCenter.x-z.bounds.width/1.8:z.position.x-=z.bounds.width/2,z.position.y+=z.bounds.height/4,A=new c.Point(z.bounds.leftCenter),d=new c.PointText(A),d.style=J,d.fillColor="black",d.fontWeight="bold",d.content="_666 ",d.position.x+=I,d.position.y+=3*d.bounds.height),"Bit"===a[H].typ_danych&&(A=new c.Point(d.bounds.bottomCenter),d=new c.Path.Circle(A,8),d.style=t,d.position.y+=.8*d.bounds.height,f||(f=!0,d.position.x+=z.bounds.width,d.position.y+=z.bounds.height)),A=new c.Point(d.bounds.leftCenter),B=new c.PointText(A),B.style=J,B.content=K(a[H].opis_pelny),B.position.x-=B.bounds.width+I,B.position.y+=3*B.bounds.height,e.push(d);return e};if(!(a(l).length>0)){switch(v=document.createElement("div"),a(v).attr("id",l.replace("#","")).css({border:"0.2em solid","border-color":"red","border-radius":"0.5em",padding:"1",width:"99%",height:"80%",margin:"2px 2px 2px 2px"}),a(f).append(v),G=document.createElement("canvas"),a(G).attr("id","canvas").width("100%").height("100%").appendTo("#idGrafikaTrybSerwisowy"),c.setup(G),y=new c.Rectangle(new c.Point(c.view.bounds.topCenter),new c.Size(c.view.bounds.width/5,c.view.bounds.height/3.5)),x=new c.Path.RoundRectangle(y,new c.Size(5,5)),x.strokeColor="grey",x.strokeWidth=2,x.position.x=I+x.bounds.width/2,x.position.y+=I,C=2.5,g=new c.CompoundPath("M20.834,8.037L9.641,14.5c-1.43,0.824-1.43,2.175,0,3l11.193,6.463c1.429,0.826,2.598,0.15,2.598-1.5V9.537C23.432,7.887,22.263,7.211,20.834,8.037z"),g.style=t,g.scale(x.bounds.height/(g.bounds.height*C)),g.position=x.bounds.leftCenter,g.position.x+=.5*g.bounds.width+I,g.position.y+=.6*g.bounds.height-I,j=new c.CompoundPath("M8.037,11.166L14.5,22.359c0.825,1.43,2.175,1.43,3,0l6.463-11.194c0.826-1.429,0.15-2.598-1.5-2.598H9.537C7.886,8.568,7.211,9.737,8.037,11.166z"),j.style=t,j.scale(x.bounds.height/(j.bounds.height*C)),j.position=g.bounds.rightCenter,j.position.x+=.5*j.bounds.width+I,i=new c.CompoundPath("M23.963,20.834L17.5,9.64c-0.825-1.429-2.175-1.429-3,0L8.037,20.834c-0.825,1.429-0.15,2.598,1.5,2.598h12.926C24.113,23.432,24.788,22.263,23.963,20.834z"),i.style=t,i.scale(x.bounds.height/(i.bounds.height*C)),i.position=j.bounds.topCenter,i.position.y-=.5*i.bounds.height+I,h=new c.CompoundPath("M11.166,23.963L22.359,17.5c1.43-0.824,1.43-2.175,0-3L11.166,8.037c-1.429-0.826-2.598-0.15-2.598,1.5v12.926C8.568,24.113,9.737,24.789,11.166,23.963z"),h.style=t,h.scale(x.bounds.height/(h.bounds.height*C)),h.position=j.bounds.rightCenter,h.position.x+=.5*h.bounds.width+I,A=new c.Point(i.bounds.rightCenter),B=new c.PointText(A),B.fontWeight="bold",B.fillColor="grey",B.fontSize="2.5em",B.content="IPS",B.position.x+=.2*B.bounds.width,B.position.y+=B.bounds.height,A=new c.Point(B.bounds.rightCenter),D=new c.PointText(A),D.fontWeight="bold",D.fillColor="grey",D.fontSize="2.5em",D.content="NL",D.position.x+=(c.view.bounds.width-x.bounds.width)/3.8,D.position.y+=.25*D.bounds.height,A=new c.Point(D.bounds.rightCenter),E=new c.PointText(A),E.fontWeight="bold",E.fillColor="grey",E.fontSize="2.5em",E.content="NP",E.position.x+=(c.view.bounds.width-x.bounds.width)/3.8,E.position.y+=.25*E.bounds.height,A=new c.Point(E.bounds.rightCenter),F=new c.PointText(A),F.fontWeight="bold",F.fillColor="grey",F.fontSize="2.5em",F.content="NR",F.position.x+=(c.view.bounds.width-x.bounds.width)/3.8,F.position.y+=.25*F.bounds.height,k===!1&&(s=s.concat(d.szukajWartosci("klawiszeTrybSerwis",b.sygnaly)),m=m.concat(d.szukajWartosci("grFalownikNL",b.sygnaly)),o=o.concat(d.szukajWartosci("grFalownikNP",b.sygnaly)),q=q.concat(d.szukajWartosci("grFalownikNR",b.sygnaly)),m=e.inicjacja(m),o=e.inicjacja(o),q=e.inicjacja(q),k=!0),u){case"1":n=L(m,D),r=L(o,F);break;case"2":p=L(o,E),r=L(o,F);break;case"3":n=L(m,D),p=L(o,E),r=L(o,F);break;case"4":n=L(m,D);break;case"5":p=L(o,E);break;case"6":n=L(m,D),p=L(o,E);break;case"7":r=L(o,F)}c.view.draw(),w()}};return{inicjacja:y,czyscGrafike:x}});