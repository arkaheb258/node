/*! Data kompilacji: Tue Jul 28 2015 11:01:42 */
define(["jquery","zmienneGlobalne","keyboard","keyboardNav","obslugaJSON"],function(a,b,c,d,e){"use strict";var f,g,h,i="#DialogEdycjaParametru",j=function(){var b;b=a("#keyboard").keyboard().getkeyboard(),void 0!==b&&b.isVisible()&&(b.close(),b.destroy()),a("#DialogEdycjaParametru").empty(),a("#DialogEdycjaParametru").dialog("close"),a("#menu").addClass("kopex-selected")},k=function(){var c,d,i=!1,k=function(a){var b;return b=a%1===0?!0:!1};c=a("#keyboard").keyboard().getkeyboard(),"pLiczba"===h.TYP||"pCzas"===h.TYP?isNaN(g)?i=!1:(d=k(g)?h.PREC:g.toString().split(".")[1].length,i=d<=h.PREC?g<h.MIN||g>h.MAX?!1:!0:!1):i=!0,i?(b.doWyslania.parametr.id=f,b.doWyslania.parametr.wartosc=g,c.close(),c.destroy(),j(),require(["progresBar"],function(a){a.inicjacja({show:!0,status:"sending"})}),e.wyslij(b.doWyslania.parametr),console.log(b.doWyslania.parametr)):setTimeout(function(){c.$el.val(b.danePlikuKonfiguracyjnego.TEKSTY.paramZlaWartosc),setTimeout(function(){c.$el.val("").focus()},1500)},200)},l=function(a){b.doWyslania.parametr.id=f,b.doWyslania.parametr.wartosc=a,require(["progresBar"],function(a){a.inicjacja({show:!0,status:"sending"})}),j(),e.wyslij(b.doWyslania.parametr),console.log(b.doWyslania.parametr)},m=function(){a("#keyboard").bind("canceled.keyboard",function(){j()}),a("#keyboard").bind("accepted.keyboard",function(a,b,c){"pString"===h.TYP?g=c.value:("pLiczba"===h.TYP||"pCzas"===h.TYP)&&(g=Number(c.value)),k()})},n=function(){var c,d,e;c=document.createElement("p"),a(c).css({position:"relative",top:"25%"}),d=document.createElement("label"),e=document.createElement("input"),a(d).attr("for","spinner"),a(c).append(d),a(e).attr("id","spinner").attr("name","value").css({"font-size":"1.5em","text-align":"center",width:"20em"}),a(c).append(e),a("#DialogEdycjaParametru").append(c),a("#DialogEdycjaParametru").dialog({buttons:[{disabled:!0,text:b.danePlikuKonfiguracyjnego.TEKSTY.zatwierdz},{disabled:!0,text:b.danePlikuKonfiguracyjnego.TEKSTY.anuluj}]}),a("#spinner").formatSpinner({values:h.LISTA,count:h.LISTA.length}),a("#spinner").addClass("kopex-selected").addClass("kopex-selected").formatSpinner("stepUp")},o=function(){var c,d,e,f;if(0===a(i).length)switch(c=document.createElement("div"),a(c).addClass("OknaDialog").addClass("ui-corner-all").attr("id",i.replace("#","")),a("body").append(c),e=b.danePlikuKonfiguracyjnego.TEKSTY.parametr+" "+h.ID,a(i).dialog({modal:!0,closeOnEscape:!1,height:a(document).height()/1.5,width:"65%",hide:{delay:200,effect:b.efektShowHide,duration:350},title:e}),a(i).dialog("open"),d=document.createElement("p"),a(d).attr("id","pParametrOpis").text(h.OPIS).css({padding:"0.4em",border:"0.1em solid","border-color":"grey","font-style":"italic","font-size":"1.2em","text-align":"center","border-radius":"0.5em",width:"95%"}),a("#DialogEdycjaParametru").append(d),f="pLista"===h.TYP?" = "+h.LISTA[h.WART]:" = "+h.WART,d=document.createElement("p"),a(d).attr("id","pAktualnaWartosc").text(b.danePlikuKonfiguracyjnego.TEKSTY.wartAktualna+" "+f).css({"letter-spacing":"0.1em","text-align":"left","border-radius":"0.5em",width:"100%"}),a("#DialogEdycjaParametru").append(d),a("#menu").removeClass("kopex-selected"),b.doWyslania.parametr.typ=h.TYP,h.TYP){case"pLista":n();break;case"pString":case"pCzas":case"pLiczba":require(["wspolne/dodajKlawiature"],function(a){a.inicjacja(h,"DialogEdycjaParametru"),m()})}a(i).one("dialogclose",function(){setTimeout(function(){a(i).remove()},500)})},p=function(){a("#menu").one("menuselect",function(c,d){var e,g=d.item.attr("id"),i=d.item.parent().parent(),j=i.parent().parent();return f=g,d.item.hasClass("ui-state-disabled")?void a("#menu").menu("next"):(b.zmienianyParametr.id=g,a.each(b.parametry.DANE,function(c,d){c===j.attr("id")&&(b.zmienianyParametr.grupa=c,a.each(d,function(c,d){c===i.attr("id")&&(b.zmienianyParametr.podgrupa=c,a.each(d,function(a,c){a===g&&(e=c,b.zmienianyParametr.obiekt=e)}))}))}),void(void 0!==e&&(h=e,o(e))))})};return{inicjacja:p,zamknijKlawiature:j,wyslijReaDolPLC:k,wyslijListeDoPLC:l}});