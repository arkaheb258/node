<!doctype html>
<html>
  <head>
    <title>Socket.IO chat</title>
	<script src="http://code.jquery.com/jquery-1.11.1.js"></script>
	<script src="/socket.io/socket.io.js"></script>
	<script>
    var daneDiag = {
      "sID": "BS_1",
      "DigitData": [0,
      2,
      0,
      0,
      0,
      0,
      0,
      0,
      0,
      0],
      "AnalogData": [0,
      0,
      0,
      0,
      0,
      0,
      0,
      0,
      0,
      0,
      0,
      0,
      0,
      0,
      0,
      0,
      0,
      0,
      0]
    };

    var dane = {
      "TimeStamp_s": 1434958498,
      "TimeStamp_ms": 27298580,
      "TimeStamp_js": 1434965698580,
      "komisja": "01H9001234",
      "wDataControl": 0,
      "wData": [0,
      0,
      0,
      0,
      0,
      0],
      "Analog": [0,
      0,
      0,
      0,
      0,
      0,
      0,
      0,
      0,
      0,
      0,
      0,
      0,
      0,
      0,
      0,
      0,
      0,
      0,
      0,
      0,
      0,
      0,
      0,
      0,
      0,
      0,
      0,
      0,
      0,
      0,
      0,
      0,
      0,
      0,
      0,
      0,
      0,
      0,
      0,
      0,
      0,
      0,
      0,
      0,
      0,
      0,
      0,
      0,
      0,
      0,
      0,
      0,
      0,
      0,
      0,
      0,
      0,
      0,
      0,
      0,
      0,
      0,
      0,
      0,
      0,
      0,
      0,
      0,
      0,
      0,
      0,
      0,
      0,
      0,
      0,
      0,
      0,
      0,
      0,
      0,
      0,
      0,
      0,
      0,
      0,
      0,
      0,
      0,
      0,
      0,
      0,
      0,
      0,
      0,
      0,
      0,
      0,
      0,
      0,
      0,
      0,
      0,
      0,
      0,
      0,
      0,
      0,
      0,
      0,
      0,
      0,
      0,
      0,
      0,
      0,
      0,
      0,
      0,
      0,
      0,
      0,
      0,
      0,
      3,
      0,
      13,
      0,
      12,
      10,
      14854,
      0,
      31730,
      7959,
      14039,
      0,
      1355,
      0,
      0,
      0,
      0,
      0,
      0,
      0,
      0,
      0,
      0,
      0,
      0,
      0,
      0,
      0,
      0,
      -32732,
      -8740,
      -26078,
      -4373,
      10991,
      0,
      0,
      0,
      0,
      0,
      0,
      0,
      0,
      0,
      0,
      0,
      0,
      0,
      0,
      0,
      0,
      0,
      0,
      0,
      0,
      0,
      0,
      0,
      0,
      0,
      0,
      0,
      0,
      0,
      0,
      0,
      0,
      0,
      0,
      0,
      0,
      0,
      0,
      0,
      0,
      0,
      0,
      0,
      0,
      0,
      0,
      0,
      0,
      0,
      0,
      0,
      -66],
      "Bit": [0,
      0,
      0,
      0,
      0,
      0,
      0,
      0,
      0,
      0,
      0,
      0,
      0,
      0,
      8192,
      0,
      0,
      0,
      0,
      0,
      0,
      0,
      14,
      0,
      2,
      0,
      26624,
      0,
      0,
      0,
      0,
      0],
      "Mesg": [18755,
      21586,
      21589,
      1,
      0,
      0,
      0,
      0,
      0,
      0,
      0,
      0,
      0,
      0,
      0,
      0,
      0,
      0,
      0,
      0,
      32768,
      256,
      34334,
      4067,
      3,
      0,
      0,
      0,
      20,
      0,
      0,
      0,
      0,
      0,
      0,
      944,
      8,
      0,
      0,
      0,
      0,
      0],
      "MesgType": [65375,
      64510,
      65471,
      34815,
      65531,
      49151,
      49151,
      65535,
      65533,
      65535,
      32703,
      63455,
      65534,
      65535,
      63423,
      65535,
      65534,
      65534,
      65023,
      65535,
      65503,
      65399,
      43007,
      65535,
      65533,
      65343,
      30719,
      46591,
      65462,
      65535,
      65535,
      65535,
      65535,
      65461,
      63487,
      32767,
      65515,
      65471,
      49151,
      65535,
      16379,
      0],
      "MesgStatus": [0,
      0,
      0,
      0,
      0,
      0,
      0,
      0,
      0,
      0,
      0,
      0,
      0,
      0,
      0,
      0,
      0,
      0,
      0,
      0,
      0,
      0,
      0,
      0,
      0,
      0,
      0,
      0,
      0,
      0,
      0,
      0,
      0,
      0,
      0,
      0,
      0,
      0,
      0,
      0,
      0,
      0],
      "BlockUsr": [32607,
      64256,
      1168,
      255,
      65267,
      48900,
      1280,
      766,
      15357,
      48961,
      4353,
      4319,
      65406,
      63264,
      8480,
      249,
      49086,
      42786,
      16384,
      2655,
      64479,
      65313,
      40960,
      383,
      38909,
      63232,
      21504,
      34047,
      61366,
      64320,
      18451,
      253,
      64463,
      64256,
      16384,
      2143,
      57321,
      48896,
      515,
      16759,
      48123,
      16128],
      "BlockSrvc": [6720,
      62398,
      60207,
      1,
      33026,
      49143,
      49150,
      0,
      1573,
      32639,
      32571,
      40960,
      256,
      61439,
      63167,
      29184,
      4200,
      32766,
      48633,
      9024,
      13059,
      64375,
      43007,
      130,
      24,
      60735,
      29631,
      32,
      528,
      32765,
      65531,
      264,
      18592,
      48533,
      63487,
      9360,
      35,
      64439,
      45055,
      2,
      2304,
      19967],
      "BlockAdv": [64256,
      24674,
      4103,
      1983,
      29472,
      268,
      167,
      65343,
      64400,
      65,
      959,
      30559,
      65480,
      2084,
      8255,
      65527,
      65290,
      33808,
      3327,
      65535,
      48904,
      24598,
      115,
      65530,
      31488,
      2,
      24831,
      46591,
      65280,
      49155,
      735,
      65535,
      65284,
      17,
      4279,
      32767,
      61216,
      12296,
      4223,
      65534,
      65298,
      16389]
    };
	  var socket = io();
	  socket.emit('strada', 'bla');
	  socket.on('dane', function(msg){
      // console.log(msg);
      $('#dane').text(JSON.stringify(msg));
      $('#t_dane').text(JSON.stringify(new Date()));
	  });
	  socket.on('gpar', function(msg){
	  	// $('#gpar').text(JSON.stringify(msg));
		$('#t_gpar').text(JSON.stringify(new Date()));
	  });
	  socket.on('daneDiag', function(msg){
      // console.log('daneDiag', msg);
      $('#t_diag').text(JSON.stringify(new Date()));
      $('#daneDiag').text(JSON.stringify(msg));
	  });
    setInterval(function(){
			dane.TimeStamp_js = Date.now();
			dane.TimeStamp_s = Math.floor(dane.TimeStamp_js / 1000);
			dane.TimeStamp_ms = dane.TimeStamp_js - (new Date()).setUTCHours(0, 0, 0, 0);
      socket.emit('io_emit', ['dane', dane]);
      socket.emit('io_emit', ['daneDiag', daneDiag]);
    }, 500);
	</script>
  </head>
  <body>
	<div id="dane"></div>
	<div id="daneDiag"></div>
	Dane: <span id="t_dane"></span></br>
	GPar: <span id="t_gpar"></span></br>
	DDiag: <span id="t_diag"></span></br>
	<div id="gpar"></div>
  </body>
</html>