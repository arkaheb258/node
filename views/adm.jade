- console.log('start');
doctype 1.1
html
	head
		title Lista PNU
		link(rel='stylesheet', href='jquery-ui.css')
		style.
			body {
				background-color: #737173;
				position:absolute;
				top: 0px;
				bottom: 0px;
				height: 95%;
				width: 95%;
				text-align: center;
			}
			
			div {
				margin: 2em;
			}
			
			table {
				width: 100%;
				height: 100%;
			}
			
			#i_frame {
				text-align: left;
				background: white;
				height: 100%;
				width: 100%;
				overflow: auto;
			}
			
			.dane {
				color: blue;
			}
			.log {
				color: black;
			}
			.err {
				color: red;
			}
				
			#exec {
				width: 100%;
			}
	body
		script(src='jquery.min.js')
		script(src='jquery-ui.min.js')
		script(src="/socket.io/socket.io.js")
		table
			tr
				td(style="width:300px;")
					div(id="restart") Restart Node
					div(id="exit") Wyłączenie Node
					div(id="backup") Zapisanie zmian w TC (backup)
					div(id="reboot") Reboot systemu
					div(id="refresh") Odświerz przeglądarkę
				td
					div(id="i_frame")
						div(id="i_frame2")
			tr
				td(colspan=2)
					input(type="text" id="exec")
		script.
			var socket = io();
			function append_text(msg, typ){
				// $('#i_frame').val($($('#i_frame').val() + JSON.stringify(msg)));
				$('#i_frame2').append($('<li class="'+typ+'">').html(msg));
				setTimeout(function () {
					$('#i_frame').scrollTop($('#i_frame2').height());
				}, 50);
			}
			socket.on('text', function(msg){ append_text(JSON.stringify(msg).replace(/\\n/g,"<br/>"), 'text'); });
			socket.on('dane', function(msg){ append_text(JSON.stringify(msg), 'dane'); });
			socket.on('log', function(msg){ append_text(JSON.stringify(msg), 'log'); });
			socket.on('err', function(msg){ append_text(JSON.stringify(msg), 'err'); });
			$(document).ready( function(){ 
				$('#restart').button().click(function(){	socket.emit('restart', 'restart'); });
				$('#exit'	).button().click(function(){	socket.emit('exit', 'exit'); });
				$('#reboot'	).button().click(function(){	socket.emit('exec', 'sudo reboot'); });
				$('#refresh').button().click(function(){	socket.emit('refresh', 'refresh'); });
				$('#backup'	).button().click(function(){	socket.emit('exec', 'filetool.sh -b'); });
			});
			$('#exec').keypress(function (event) {
				if (event.which == 13) {
					socket.emit('exec', $('#exec').val());
					$('#exec').val('');
					//return false; only if needed
				}
			});
- console.log('end');