/*! Data kompilacji: Fri Oct 03 2014 10:52:28 */
Raphael.el.popup=function(a,b,c,d){var e,f,g,h,i=this.paper||this[0].paper;if(i){switch(this.type){case"text":case"circle":case"ellipse":f=!0;break;default:f=!1}return a=null==a?"up":a,b=b||5,e=this.getBBox(),c="number"==typeof c?c:f?e.x+e.width/2:e.x,d="number"==typeof d?d:f?e.y+e.height/2:e.y,g=Math.max(e.width/2-b,0),h=Math.max(e.height/2-b,0),this.translate(c-e.x-(f?e.width/2:0),d-e.y-(f?e.height/2:0)),e=this.getBBox(),c={up:["M",c,d,"l",-b,-b,-g,0,"a",b,b,0,0,1,-b,-b,"l",0,-e.height,"a",b,b,0,0,1,b,-b,"l",2*b+2*g,0,"a",b,b,0,0,1,b,b,"l",0,e.height,"a",b,b,0,0,1,-b,b,"l",-g,0,"z"].join(),down:["M",c,d,"l",b,b,g,0,"a",b,b,0,0,1,b,b,"l",0,e.height,"a",b,b,0,0,1,-b,b,"l",-(2*b+2*g),0,"a",b,b,0,0,1,-b,-b,"l",0,-e.height,"a",b,b,0,0,1,b,-b,"l",g,0,"z"].join(),left:["M",c,d,"l",-b,b,0,h,"a",b,b,0,0,1,-b,b,"l",-e.width,0,"a",b,b,0,0,1,-b,-b,"l",0,-(2*b+2*h),"a",b,b,0,0,1,b,-b,"l",e.width,0,"a",b,b,0,0,1,b,b,"l",0,h,"z"].join(),right:["M",c,d,"l",b,-b,0,-h,"a",b,b,0,0,1,b,-b,"l",e.width,0,"a",b,b,0,0,1,b,b,"l",0,2*b+2*h,"a",b,b,0,0,1,-b,b,"l",-e.width,0,"a",b,b,0,0,1,-b,-b,"l",0,-h,"z"].join()},b={up:{x:-!f*(e.width/2),y:2*-b-(f?e.height/2:e.height)},down:{x:-!f*(e.width/2),y:2*b+(f?e.height/2:e.height)},left:{x:2*-b-(f?e.width/2:e.width),y:-!f*(e.height/2)},right:{x:2*b+(f?e.width/2:e.width),y:-!f*(e.height/2)}}[a],this.translate(b.x,b.y),i.path(c[a]).attr({fill:"#000",stroke:"none"}).insertBefore(this.node?this:this[0])}},Raphael.el.tag=function(a,b,c,d){var e=this.paper||this[0].paper;if(e){var f,g,h,e=e.path().attr({fill:"#000",stroke:"#000"}),i=this.getBBox();switch(this.type){case"text":case"circle":case"ellipse":h=!0;break;default:h=!1}return a=a||0,c="number"==typeof c?c:h?i.x+i.width/2:i.x,d="number"==typeof d?d:h?i.y+i.height/2:i.y,b=null==b?5:b,g=.5522*b,i.height>=2*b?e.attr({path:["M",c,d+b,"a",b,b,0,1,1,0,2*-b,b,b,0,1,1,0,2*b,"m",0,2*-b-3,"a",b+3,b+3,0,1,0,0,2*(b+3),"L",c+b+3,d+i.height/2+3,"l",i.width+6,0,0,-i.height-6,-i.width-6,0,"L",c,d-b-3].join()}):(f=Math.sqrt(Math.pow(b+3,2)-Math.pow(i.height/2+3,2)),e.attr({path:["M",c,d+b,"c",-g,0,-b,g-b,-b,-b,0,-g,b-g,-b,b,-b,g,0,b,b-g,b,b,0,g,g-b,b,-b,b,"M",c+f,d-i.height/2-3,"a",b+3,b+3,0,1,0,0,i.height+6,"l",b+3-f+i.width+6,0,0,-i.height-6,"L",c+f,d-i.height/2-3].join()})),a=360-a,e.rotate(a,c,d),this.attrs?(this.attr(this.attrs.x?"x":"cx",c+b+3+(h?i.width/2:"text"==this.type?i.width:0)).attr("y",h?d:d-i.height/2),this.rotate(a,c,d),a>90&&270>a&&this.attr(this.attrs.x?"x":"cx",c-b-3-(h?i.width/2:i.width)).rotate(180,c,d)):a>90&&270>a?(this.translate(c-i.x-i.width-b-3,d-i.y-i.height/2),this.rotate(a-180,i.x+i.width+b+3,i.y+i.height/2)):(this.translate(c-i.x+b+3,d-i.y-i.height/2),this.rotate(a,i.x-b-3,i.y+i.height/2)),e.insertBefore(this.node?this:this[0])}},Raphael.el.drop=function(a,b,c){var d,e,f=this.getBBox(),g=this.paper||this[0].paper;if(g){switch(this.type){case"text":case"circle":case"ellipse":d=!0;break;default:d=!1}return a=a||0,b="number"==typeof b?b:d?f.x+f.width/2:f.x,c="number"==typeof c?c:d?f.y+f.height/2:f.y,e=Math.max(f.width,f.height)+Math.min(f.width,f.height),g=g.path(["M",b,c,"l",e,0,"A",.4*e,.4*e,0,1,0,b+.7*e,c-.7*e,"z"]).attr({fill:"#000",stroke:"none"}).rotate(22.5-a,b,c),a=(a+90)*Math.PI/180,b=b+e*Math.sin(a)-(d?0:f.width/2),a=c+e*Math.cos(a)-(d?0:f.height/2),this.attrs?this.attr(this.attrs.x?"x":"cx",b).attr(this.attrs.y?"y":"cy",a):this.translate(b-f.x,a-f.y),g.insertBefore(this.node?this:this[0])}},Raphael.el.flag=function(a,b,c){var d=this.paper||this[0].paper;if(d){var e,d=d.path().attr({fill:"#000",stroke:"#000"}),f=this.getBBox(),g=f.height/2;switch(this.type){case"text":case"circle":case"ellipse":e=!0;break;default:e=!1}return a=a||0,b="number"==typeof b?b:e?f.x+f.width/2:f.x,c="number"==typeof c?c:e?f.y+f.height/2:f.y,d.attr({path:["M",b,c,"l",g+3,-g-3,f.width+6,0,0,f.height+6,-f.width-6,0,"z"].join()}),a=360-a,d.rotate(a,b,c),this.attrs?(this.attr(this.attrs.x?"x":"cx",b+g+3+(e?f.width/2:"text"==this.type?f.width:0)).attr("y",e?c:c-f.height/2),this.rotate(a,b,c),a>90&&270>a&&this.attr(this.attrs.x?"x":"cx",b-g-3-(e?f.width/2:f.width)).rotate(180,b,c)):a>90&&270>a?(this.translate(b-f.x-f.width-g-3,c-f.y-f.height/2),this.rotate(a-180,f.x+f.width+g+3,f.y+f.height/2)):(this.translate(b-f.x+g+3,c-f.y-f.height/2),this.rotate(a,f.x-g-3,f.y+f.height/2)),d.insertBefore(this.node?this:this[0])}},Raphael.el.label=function(){var a=this.getBBox(),b=this.paper||this[0].paper,c=Math.min(20,a.width+10,a.height+10)/2;return b?b.rect(a.x-c/2,a.y-c/2,a.width+c,a.height+c,c).attr({stroke:"none",fill:"#000"}).insertBefore(this.node?this:this[0]):void 0},Raphael.el.blob=function(a,b,c){var d,e,f=this.getBBox(),g=Math.PI/180,h=this.paper||this[0].paper;if(h){switch(this.type){case"text":case"circle":case"ellipse":d=!0;break;default:d=!1}h=h.path().attr({fill:"#000",stroke:"none"}),a=(+a+1?a:45)+90,e=Math.min(f.height,f.width);var b="number"==typeof b?b:d?f.x+f.width/2:f.x,c="number"==typeof c?c:d?f.y+f.height/2:f.y,i=Math.max(f.width+e,25*e/12),j=Math.max(f.height+e,25*e/12);d=b+e*Math.sin((a-22.5)*g);var k=c+e*Math.cos((a-22.5)*g),l=b+e*Math.sin((a+22.5)*g),a=c+e*Math.cos((a+22.5)*g),g=(l-d)/2;e=(a-k)/2;var i=i/2,j=j/2,m=-Math.sqrt(Math.abs(i*i*j*j-i*i*e*e-j*j*g*g)/(i*i*e*e+j*j*g*g));return e=m*i*e/j+(l+d)/2,g=m*-j*g/i+(a+k)/2,h.attr({x:e,y:g,path:["M",b,c,"L",l,a,"A",i,j,0,1,1,d,k,"z"].join()}),this.translate(e-f.x-f.width/2,g-f.y-f.height/2),h.insertBefore(this.node?this:this[0])}},Raphael.fn.label=function(a,b,c){var d=this.set(),c=this.text(a,b,c).attr(Raphael.g.txtattr);return d.push(c.label(),c)},Raphael.fn.popup=function(a,b,c,d,e){var f=this.set(),c=this.text(a,b,c).attr(Raphael.g.txtattr);return f.push(c.popup(d,e),c)},Raphael.fn.tag=function(a,b,c,d,e){var f=this.set(),c=this.text(a,b,c).attr(Raphael.g.txtattr);return f.push(c.tag(d,e),c)},Raphael.fn.flag=function(a,b,c,d){var e=this.set(),c=this.text(a,b,c).attr(Raphael.g.txtattr);return e.push(c.flag(d),c)},Raphael.fn.drop=function(a,b,c,d){var e=this.set(),c=this.text(a,b,c).attr(Raphael.g.txtattr);return e.push(c.drop(d),c)},Raphael.fn.blob=function(a,b,c,d){var e=this.set(),c=this.text(a,b,c).attr(Raphael.g.txtattr);return e.push(c.blob(d),c)},Raphael.el.lighter=function(a){var a=a||2,b=[this.attrs.fill,this.attrs.stroke];return this.fs=this.fs||[b[0],b[1]],b[0]=Raphael.rgb2hsb(Raphael.getRGB(b[0]).hex),b[1]=Raphael.rgb2hsb(Raphael.getRGB(b[1]).hex),b[0].b=Math.min(b[0].b*a,1),b[0].s/=a,b[1].b=Math.min(b[1].b*a,1),b[1].s/=a,this.attr({fill:"hsb("+[b[0].h,b[0].s,b[0].b]+")",stroke:"hsb("+[b[1].h,b[1].s,b[1].b]+")"}),this},Raphael.el.darker=function(a){var a=a||2,b=[this.attrs.fill,this.attrs.stroke];return this.fs=this.fs||[b[0],b[1]],b[0]=Raphael.rgb2hsb(Raphael.getRGB(b[0]).hex),b[1]=Raphael.rgb2hsb(Raphael.getRGB(b[1]).hex),b[0].s=Math.min(b[0].s*a,1),b[0].b/=a,b[1].s=Math.min(b[1].s*a,1),b[1].b/=a,this.attr({fill:"hsb("+[b[0].h,b[0].s,b[0].b]+")",stroke:"hsb("+[b[1].h,b[1].s,b[1].b]+")"}),this},Raphael.el.resetBrightness=function(){return this.fs&&(this.attr({fill:this.fs[0],stroke:this.fs[1]}),delete this.fs),this},function(){var a,b=["lighter","darker","resetBrightness"],c="popup tag flag label drop blob".split(" ");for(a in c)(function(a){Raphael.st[a]=function(){return Raphael.el[a].apply(this,arguments)}})(c[a]);for(a in b)(function(a){Raphael.st[a]=function(){for(var b=0;b<this.length;b++)this[b][a].apply(this[b],arguments);return this}})(b[a])}(),Raphael.g={shim:{stroke:"none",fill:"#000","fill-opacity":0},txtattr:{font:"12px Arial, sans-serif",fill:"#fff"},colors:function(){for(var a=[.6,.2,.05,.1333,.75,0],b=[],c=0;10>c;c++)b.push(c<a.length?"hsb("+a[c]+",.75, .75)":"hsb("+a[c-a.length]+", 1, .5)");return b}(),snapEnds:function(a,b,c){function d(a){return.25>Math.abs(a-.5)?~~a+.5:Math.round(a)}var e=a,f=b;if(e==f)return{from:e,to:f,power:0};var e=(f-e)/c,g=f=~~e,c=0;if(f){for(;g;)c--,g=~~(e*Math.pow(10,c))/Math.pow(10,c);c++}else{if(0!=e&&isFinite(e))for(;!f;)c=c||1,f=~~(e*Math.pow(10,c))/Math.pow(10,c),c++;else c=1;c&&c--}return f=d(b*Math.pow(10,c))/Math.pow(10,c),b>f&&(f=d((b+.5)*Math.pow(10,c))/Math.pow(10,c)),e=d((a-(c>0?0:.5))*Math.pow(10,c))/Math.pow(10,c),{from:e,to:f,power:c}},axis:function(a,b,c,d,e,f,g,h,i,j,k){var j=null==j?2:j,i=i||"t",f=f||10,k=arguments[arguments.length-1],l="|"==i||" "==i?["M",a+.5,b,"l",0,.001]:1==g||3==g?["M",a+.5,b,"l",0,-c]:["M",a,b+.5,"l",c,0],m=this.snapEnds(d,e,f),n=m.from,o=m.to,p=m.power,q=0,r={font:"11px 'Fontin Sans', Fontin-Sans, sans-serif"},m=k.set(),o=(o-n)/f,s=n,t=p>0?p:0,u=c/f;if(1==+g||3==+g){for(p=b,n=(g-1?1:-1)*(j+3+!!(g-1));p>=b-c;)"-"!=i&&" "!=i&&(l=l.concat(["M",a-("+"==i||"|"==i?j:2*!(g-1)*j),p+.5,"l",2*j+1,0])),m.push(k.text(a+n,p,h&&h[q++]||(Math.round(s)==s?s:+s.toFixed(t))).attr(r).attr({"text-anchor":g-1?"start":"end"})),s+=o,p-=u;Math.round(p+u-(b-c))&&("-"!=i&&" "!=i&&(l=l.concat(["M",a-("+"==i||"|"==i?j:2*!(g-1)*j),b-c+.5,"l",2*j+1,0])),m.push(k.text(a+n,b-c,h&&h[q]||(Math.round(s)==s?s:+s.toFixed(t))).attr(r).attr({"text-anchor":g-1?"start":"end"})))}else{for(var s=n,t=(p>0)*p,n=(g?-1:1)*(j+9+!g),p=a,u=c/f,v=0,w=0;a+c>=p;)"-"!=i&&" "!=i&&(l=l.concat(["M",p+.5,b-("+"==i?j:2*!!g*j),"l",0,2*j+1])),m.push(v=k.text(p,b+n,h&&h[q++]||(Math.round(s)==s?s:+s.toFixed(t))).attr(r)),v=v.getBBox(),w>=v.x-5?m.pop(m.length-1).remove():w=v.x+v.width,s+=o,p+=u;Math.round(p-u-a-c)&&("-"!=i&&" "!=i&&(l=l.concat(["M",a+c+.5,b-("+"==i?j:2*!!g*j),"l",0,2*j+1])),m.push(k.text(a+c,b+n,h&&h[q]||(Math.round(s)==s?s:+s.toFixed(t))).attr(r)))}return l=k.path(l),l.text=m,l.all=k.set([l,m]),l.remove=function(){this.text.remove(),this.constructor.prototype.remove.call(this)},l},labelise:function(a,b,c){return a?(a+"").replace(/(##+(?:\.#+)?)|(%%+(?:\.%+)?)/g,function(a,d,e){return d?(+b).toFixed(d.replace(/^#+\.?/g,"").length):e?(100*b/c).toFixed(e.replace(/^%+\.?/g,"").length)+"%":void 0}):(+b).toFixed(0)}};